/**********************************************************
 * This file is generated by 20-sim ANSI-C Code Generator
 *
 *  file:  %FILE_NAME%
 *  model: %MODEL_NAME%
 *  expmt: %EXPERIMENT_NAME%
 *  date:  %GENERATION_DATE%
 *  time:  %GENERATION_TIME%
 *  user:  %USER_NAME%
 *  from:  %COMPANY_NAME%
 *  build: %GENERATION_BUILD%
 **********************************************************/

/* This file contains the actual model variables and equations */

/* Note: Alias variables are the result of full optimization
   of the model in 20-sim. As a result, only the real variables
   are used in the model for speed. The user may also include
   the alias variables by adding them to the end of the array:

   XXDouble %VARPREFIX%variables[NUMBER_VARIABLES + NUMBER_ALIAS_VARIABLES + 1];
   XXCharacter *%VARPREFIX%variable_names[] = {
     VARIABLE_NAMES, ALIAS_VARIABLE_NAMES, NULL
   };

   and calculate them directly after the output equations:

   void %FUNCTIONPREFIX%CalculateOutput (void)
   {
     OUTPUT_EQUATIONS
     ALIAS_EQUATIONS
   }
*/

/* system include files */
#include <stdlib.h>
#include <math.h>

/* 20-sim include files */
#include "xxmodel.h"
#include "xxfuncs.h"
#include "xxmatrix.h"
#include "motionprofiles.h"
#include "EulerAngles.h"

/* the global variables */
XXDouble %VARPREFIX%start_time = %START_TIME%;
XXDouble %VARPREFIX%finish_time = %FINISH_TIME%;
XXDouble %VARPREFIX%step_size = %TIME_STEP_SIZE%;
XXDouble %VARPREFIX%%XX_TIME%;
XXInteger %VARPREFIX%steps;
XXBoolean %VARPREFIX%%XX_INITIALIZE%;
XXBoolean %VARPREFIX%major = XXTRUE;
XXBoolean %VARPREFIX%stop_simulation = XXFALSE;

/* the variable arrays */
XXDouble %VARPREFIX%MEMORY[%NUMBER_CONSTANTS% + %NUMBER_PARAMETERS% + %NUMBER_INITIAL_VALUES% + %NUMBER_VARIABLES% + %NUMBER_STATES% + %NUMBER_STATES% + 1];
XXDouble* %VARPREFIX%%XX_CONSTANT_ARRAY_NAME% = %VARPREFIX%MEMORY;		/* constants */
XXDouble* %VARPREFIX%%XX_PARAMETER_ARRAY_NAME% = %VARPREFIX%MEMORY + %NUMBER_CONSTANTS%;			/* parameters */
XXDouble* %VARPREFIX%%XX_INITIAL_VALUE_ARRAY_NAME% = %VARPREFIX%MEMORY + %NUMBER_CONSTANTS% + %NUMBER_PARAMETERS%;		/* initial values */
XXDouble* %VARPREFIX%%XX_VARIABLE_ARRAY_NAME% = %VARPREFIX%MEMORY + %NUMBER_CONSTANTS% + %NUMBER_PARAMETERS% + %NUMBER_INITIAL_VALUES%;		/* variables */
XXDouble* %VARPREFIX%%XX_STATE_ARRAY_NAME% = %VARPREFIX%MEMORY + %NUMBER_CONSTANTS% + %NUMBER_PARAMETERS% + %NUMBER_INITIAL_VALUES% + %NUMBER_VARIABLES%;		/* states */
XXDouble *%VARPREFIX%%XX_RATE_ARRAY_NAME% = %VARPREFIX%MEMORY + %NUMBER_CONSTANTS% + %NUMBER_PARAMETERS% + %NUMBER_INITIAL_VALUES% + %NUMBER_VARIABLES% + %NUMBER_STATES%;		/* rates (or new states) */
XXMatrix %VARPREFIX%%XX_MATRIX_ARRAY_NAME%[%NUMBER_MATRICES% + 1];		/* matrices */
XXDouble %VARPREFIX%%XX_UNNAMED_ARRAY_NAME%[%NUMBER_UNNAMED% + 1];		/* unnamed */
XXDouble %VARPREFIX%workarray[%WORK_ARRAY_SIZE% + 1];
XXDouble %VARPREFIX%%XX_FAVORITE_PARS_ARRAY_NAME%[%NUMBER_FAVORITE_PARAMETERS% + 1];	/* favorite parameters */
XXDouble %VARPREFIX%%XX_FAVORITE_VARS_ARRAY_NAME%[%NUMBER_FAVORITE_VARIABLES% + 1];		/* favorite variables */
%IF%%NUMBER_IMPORTS%
XXDouble %VARPREFIX%%XX_EXT_IN_ARRAY_NAME%[%NUMBER_IMPORTS%]; /* import variables */
%ENDIF%
%IF%%NUMBER_EXPORTS%
XXDouble %VARPREFIX%%XX_EXT_OUT_ARRAY_NAME%[%NUMBER_EXPORTS%]; /* export variables */
%ENDIF%

/* the names of the variables as used in the arrays above
   uncomment this part if these names are needed
XXCharacter *%VARPREFIX%constant_names[] = {
%CONSTANT_NAMES%,	NULL
};
XXCharacter *%VARPREFIX%parameter_names[] = {
%PARAMETER_NAMES%,	NULL
};
XXCharacter *%VARPREFIX%initial_value_names[] = {
%INITIAL_VALUE_NAMES%,	NULL
};
XXCharacter *%VARPREFIX%variable_names[] = {
%VARIABLE_NAMES%,	NULL
};
XXCharacter *%VARPREFIX%state_names[] = {
%STATE_NAMES%,	NULL
};
XXCharacter *%VARPREFIX%rate_names[] = {
%RATE_NAMES%,	NULL
};
XXCharacter *%VARPREFIX%matrix_names[] = {
%MATRIX_NAMES%,	NULL
};
XXString %VARPREFIX%favorite_par_names[] = {
%FAVORITE_PARAMETER_NAMES%, NULL
};
XXString %VARPREFIX%favorite_var_names[] = {
%FAVORITE_VARIABLE_NAMES%, NULL
};
%IF%%NUMBER_IMPORTS%
XXString %VARPREFIX%import_names[] = {
%IMPORT_NAMES%, NULL
};
%ENDIF%
%IF%%NUMBER_EXPORTS%
XXString %VARPREFIX%export_names[] = {
%EXPORT_NAMES%, NULL
};
%ENDIF%
*/

/* this method is called before calculation is possible */
void %FUNCTIONPREFIX%ModelInitialize (void)
{
	/* set the constants */
%INITIALIZE_CONSTANTS%

	/* set the parameters */
%INITIALIZE_PARAMETERS%

	/* set the initial values */
%INITIALIZE_INITIAL_VALUES%

	/* set the states */
%INITIALIZE_STATES%

	/* set the matrices */
%INITIALIZE_MATRICES%

	/* set the favorites */
%INITIALIZE_FAVORITE_PARS%
%INITIALIZE_FAVORITE_VARS%
}

/* This function calculates the initial equations of the model.
 * These equations are calculated before anything else
 */
void %FUNCTIONPREFIX%CalculateInitial (void)
{
	/* the favorite parameters equations */
%FAVORITE_PARS_EQUATIONS%

%INITIAL_EQUATIONS%
}

/* This function calculates the static equations of the model.
 * These equations are only dependent from parameters and constants
 */
void %FUNCTIONPREFIX%CalculateStatic (void)
{
%STATIC_EQUATIONS%
}

/* This function calculates the input equations of the model.
 * These equations are dynamic equations that must not change
 * in calls from the integration method (like random and delay).
 */
void %FUNCTIONPREFIX%CalculateInput (void)
{
	/* the favorite parameters equations */
%FAVORITE_PARS_EQUATIONS%

%INPUT_EQUATIONS%
}

/* This function calculates the dynamic equations of the model.
 * These equations are called from the integration method
 * to calculate the new model rates (that are then integrated).
 */
void %FUNCTIONPREFIX%CalculateDynamic (void)
{
%DYNAMIC_EQUATIONS%

	/* increment the step counter */
	%VARPREFIX%steps++;
}

/* This function calculates the output equations of the model.
 * These equations are not needed for calculation of the rates
 * and are kept separate to make the dynamic set of equations smaller.
 * These dynamic equations are called often more than one time for each
 * integration step that is taken. This makes model computation much faster.
 */
void %FUNCTIONPREFIX%CalculateOutput (void)
{
%OUTPUT_EQUATIONS%
%IF%%NUMBEROF_DELAYFUNCTION%
	/* delay update */
	XXDelayUpdate();
%ENDIF%

	/* set the favorite variables */
%FAVORITE_VARS_EQUATIONS%
}

/* This function calculates the final equations of the model.
 * These equations are calculated after all the calculations
 * are performed
 */
void %FUNCTIONPREFIX%CalculateFinal (void)
{
%FINAL_EQUATIONS%
}

/* this method is called after all calculations are performed */
void %FUNCTIONPREFIX%ModelTerminate(void)
{
}
